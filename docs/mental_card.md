# 2.2. Ментальная карта

## Диаграмма

```mermaid
mindmap
  root((ИС))
    Пользователи
      Гость
      Пользователь
      Модератор
      Администратор
    Книги
      Добавление
        Вручную
        По ISBN
      Каталог
        Название
        Автор
        Жанр
        Состояние
      Фотографии
      Wishlist
    Обмен
      Запрос
      Предложение
      Согласование
      Подтверждение
      История
    Поиск
      Текстовый
      По фильтрам
      Геолокация
        Радиус
        Карта
    Рейтинг
      Оценки
      Отзывы
      Верификация
    Коммуникация
      Чат
      Уведомления
        Email
        Push
    Технологии
      Backend
        FastAPI
        PostgreSQL
        Redis
      Frontend
        React
        Tailwind
      Инфраструктура
        Docker
        GitHub
```

## Комментарии к ментальной карте

### Пользователи
Система предусматривает четыре роли с разным уровнем доступа. Гость может только просматривать каталог, пользователь — полноценно участвовать в обменах, модератор — разрешать спорные ситуации, администратор — управлять всей системой.

### Книги
Центральная сущность системы. Книгу можно добавить вручную, заполнив форму, или автоматически по ISBN через интеграцию с внешними API (OpenLibrary, Google Books). Каждая книга имеет атрибуты: название, автор, жанр, состояние (новая/хорошее/удовлетворительное). Пользователь может загрузить фотографии и вести список желаемых книг (wishlist).

### Обмен
Ключевой бизнес-процесс платформы. Состоит из этапов: отправка запроса → предложение встречной книги (опционально) → согласование деталей в чате → подтверждение обмена обеими сторонами. Вся история сохраняется в профиле пользователя.

### Поиск
Три механизма поиска: полнотекстовый (по названию, автору), фильтрация (жанр, состояние, язык) и геолокационный (поиск в заданном радиусе с отображением на карте). Геолокация — ключевое преимущество перед аналогами.

### Рейтинг
Система доверия между пользователями. После каждого обмена участники выставляют друг другу оценку (1–5 звёзд) и могут оставить текстовый отзыв. Дополнительно предусмотрена верификация профиля через email и телефон.

### Коммуникация
Встроенный чат для согласования деталей обмена (время, место встречи). Система уведомлений информирует о новых запросах, сообщениях и появлении книг из wishlist поблизости. Поддерживаются email и push-уведомления.

### Технологии
Стек разделён на три уровня. Backend: FastAPI (Python) + PostgreSQL с PostGIS + Redis для кэширования. Frontend: React + Tailwind CSS + картографический сервис. Инфраструктура: Docker для контейнеризации, GitHub для хостинга кода и CI/CD.