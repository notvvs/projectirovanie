# 2. Документация

## 2.1. Подробное описание проекта

### Предметная область

Обмен книгами — практика, при которой люди передают друг другу печатные издания на безвозмездной основе или в обмен на другие книги. Традиционно это происходило через буккроссинг-полки в общественных местах, библиотеки обмена или личные договорённости. Однако такой подход имеет существенные ограничения: сложно найти конкретную книгу, нет гарантии надёжности участника, отсутствует удобный механизм коммуникации.

Информационная система призвана решить эти проблемы, предоставляя единую платформу для поиска, обмена и учёта книг с использованием современных технологий геолокации и репутационных механизмов.

### Анализ существующих аналогов

| Сервис | Преимущества | Недостатки |
|--------|--------------|------------|
| Буккроссинг (bookcrossing.com) | Международное сообщество, отслеживание «путешествия» книги | Нет прямого обмена, книгу нужно «отпустить» |
| Флибуста | Огромный каталог | Только электронные книги, правовые вопросы |
| Avito/Юла | Широкая аудитория | Нет специализации, много спама, платные услуги |
| Локальные чаты в Telegram | Простота, бесплатно | Нет структуры, сложно искать, нет рейтингов |

### Функциональные возможности системы

**Управление каталогом книг:**
- Добавление книги в личную библиотеку (вручную или по ISBN/штрихкоду)
- Указание состояния книги (новая, хорошее, удовлетворительное)
- Загрузка фотографий
- Пометка книги как доступной/недоступной для обмена
- Ведение списка желаемых книг (wishlist)

**Поиск и фильтрация:**
- Полнотекстовый поиск по названию, автору, ISBN
- Фильтры по жанру, языку, состоянию
- Геолокационный поиск — показ предложений в заданном радиусе
- Сортировка по расстоянию, рейтингу владельца, дате добавления

**Система обмена:**
- Отправка запроса на обмен
- Предложение книги в ответ или запрос безвозмездной передачи
- Чат между участниками для согласования деталей
- Подтверждение/отклонение запроса
- Фиксация завершённого обмена обеими сторонами

**Рейтинг и доверие:**
- Оценка участника после завершения обмена (1–5 звёзд)
- Текстовый отзыв
- Отображение среднего рейтинга и количества успешных обменов
- Верификация профиля (email, телефон)

**Личный кабинет:**
- Профиль пользователя с аватаром и описанием
- Моя библиотека (добавленные книги)
- Мой wishlist (желаемые книги)
- История обменов
- Входящие и исходящие запросы
- Настройки уведомлений

**Уведомления:**
- Push/email-уведомления о новых запросах
- Уведомление о появлении книги из wishlist поблизости
- Напоминание о незавершённых обменах

### Роли пользователей

| Роль | Описание | Ключевые функции |
|------|----------|------------------|
| Гость | Неавторизованный посетитель | Просмотр каталога, поиск книг, просмотр профилей |
| Пользователь | Зарегистрированный участник | Все функции гостя + управление библиотекой, обмены, рейтинги, чат |
| Модератор | Сотрудник платформы | Все функции пользователя + модерация контента, разбор споров |
| Администратор | Технический специалист | Полный доступ, управление пользователями, настройки системы |

### Технологический стек

**Backend:**
- Язык: Python 3.11+
- Фреймворк: FastAPI
- ORM: SQLAlchemy 2.0
- База данных: PostgreSQL 15+ с расширением PostGIS (для геолокации)
- Кэширование: Redis
- Очереди задач: Celery (отложенные уведомления, обработка изображений)

**Frontend:**
- Фреймворк: React 18 или Vue 3
- Стилизация: Tailwind CSS
- Карты: Яндекс.Карты API

**Инфраструктура:**
- Контейнеризация: Docker, Docker Compose
- CI/CD: GitHub Actions
- Хостинг: VPS или облачная платформа

**Интеграции:**
- OpenLibrary API / Google Books API — автозаполнение данных книги по ISBN
- SMTP-сервер — email-уведомления


### Ограничения и допущения

1. Система предназначена для обмена физическими книгами, электронные версии не поддерживаются
2. Географический охват — Россия (локализация, карты)
3. Денежные расчёты между пользователями не предусмотрены — только безвозмездный обмен
4. Модерация контента выполняется реактивно (по жалобам пользователей)